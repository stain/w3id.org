language: bash
install:
  - sudo apt-get -y install linkchecker apache2

before_script:
  - sudo sed -i '/<\/VirtualHost/ i\ <Directory /var/www/html/>\n  AllowOverride All\n </Directory>' /etc/apache2/sites-enabled/*.conf
  - cp -r * /var/www/html/
  - service apache2 restart
  - echo -e "[filtering]\nignorewarnings=http-moved-permanent" > ~/.linkchecker/linkcheckerrc

script:
  - cat $(find . -type '*.md') | 
    grep https://w3id.org | 
    sed 's,.*https://w3id,https://w3id,' |
    sed 's,[ )].*,,' | 
    linkchecker --stdin -r 0


